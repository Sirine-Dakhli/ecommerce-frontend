

<div class="blue-background py-5">
  <div class="header">

  <div class="container d-flex justify-content-between align-items-center py-3">
    <div class="logo">
      <img src="assets/logo.png" alt="ShopSafe Logo" class="logo-img" width="100" height="80" />
    </div>
    <nav>
      <ul class="nav">
        <li class="nav-item">
          <a routerLink="/" class="nav-link text-white">Accueil</a>
        </li>
        <li class="nav-item">
          <a routerLink="/contact" class="nav-link text-white">Contact</a>
        </li>
        <li class="nav-item">
          <a routerLink="/inscription-client" class="nav-link text-white">Inscription</a>
        </li>
        <li class="nav-item">
          <ng-container *ngIf="!userName; else userLoggedIn">
            <a routerLink="/login" class="nav-link text-warning">Se connecter</a>
          </ng-container>
          <ng-template #userLoggedIn>
            <span class="nav-link text-success">Bienvenue, {{ userName }}</span>
          </ng-template>
        </li>
      </ul>
    </nav>
  </div>
</div>
  <div class="container">
    <br><br>
    <h2 class="text-center mb-4">Gestion des Produits</h2>

    <form class="product-form mb-4" (ngSubmit)="onSubmit()">
      <div class="row mb-3">
        <label for="categorie" class="col-sm-2 col-form-label">Catégorie</label>
        <div class="col-sm-10">
          <select
            class="form-select"
            [(ngModel)]="selectedCategorieId"
            name="categorie"
            required
          >
            <option [value]="null" disabled>Choisissez une catégorie</option>
            <option *ngFor="let categorie of categories" [value]="categorie.id">
              {{ categorie.nom }}
            </option>
          </select>
        </div>
      </div>

      <div class="row mb-3">
        <label for="nom" class="col-sm-2 col-form-label">Nom</label>
        <div class="col-sm-10">
          <input
            type="text"
            class="form-control"
            id="nom"
            [(ngModel)]="produit.nom"
            name="nom"
            placeholder="Nom du produit"
            required
          />
        </div>
      </div>

      <div class="row mb-3">
        <label for="prix" class="col-sm-2 col-form-label">Prix</label>
        <div class="col-sm-10">
          <input
            type="number"
            class="form-control"
            id="prix"
            [(ngModel)]="produit.prix"
            name="prix"
            placeholder="Prix du produit"
            required
          />
        </div>
      </div>

      <div class="row mb-3">
        <label for="description" class="col-sm-2 col-form-label">Description</label>
        <div class="col-sm-10">
          <textarea
            class="form-control"
            id="description"
            [(ngModel)]="produit.description"
            name="description"
            placeholder="Description du produit"
          ></textarea>
        </div>
      </div>

      <div class="text-center">
        <button type="submit" class="btn btn-primary">Enregistrer</button>
      </div>
    </form>

    <table class="styled-table mt-5">
      <thead>
        <tr>
          <th>Catégorie</th>
          <th>Nom</th>
          <th>Prix</th>
          <th>Description</th>
          <th class="text-center">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let produit of produits">
          <td>{{ produit.categorie?.nom || 'Non spécifiée' }}</td>
          <td>{{ produit.nom }}</td>
          <td>{{ produit.prix | currency }}</td>
          <td>{{ produit.description }}</td>
          <td class="text-center">
            <button class="btn btn-warning me-2" (click)="editProduit(produit)">Modifier</button>
            <button class="btn btn-danger" (click)="deleteProduit(produit.id)">Supprimer</button>
          </td>
        </tr>
      </tbody>
    </table>

    <div *ngIf="!isLoading && produits.length === 0" class="text-center mt-4">
      <p class="text-muted">Aucun produit trouvé.</p>
    </div>
  </div>
</div>
